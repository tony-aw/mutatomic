<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>mutatomic — aaa00_mutatomic_help • mutatomic</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto_Serif-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="mutatomic — aaa00_mutatomic_help"><meta name="description" content="Tools for Safe Pass-By-Reference Modification Semantics on Atomic Objects  "><meta property="og:description" content="Tools for Safe Pass-By-Reference Modification Semantics on Atomic Objects  "></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mutatomic</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>mutatomic</h1>

      <div class="d-none name"><code>aaa00_mutatomic_help.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Tools for Safe Pass-By-Reference Modification Semantics on Atomic Objects <br><br></p>
    </div>


    <div class="section level2">
    <h2 id="what-is-mutatomic-">What is 'mutatomic'?<a class="anchor" aria-label="anchor" href="#what-is-mutatomic-"></a></h2>


<p>'mutatomic' is an 'R' package that provides 2 things:</p><ul><li><p>For regular 'R' users: <br>
A new class of <a href="https://rdrr.io/r/base/vector.html" class="external-link">atomic</a> vectors, matrices, and arrays,
called <a href="mutatomic_class.html">mutatomic</a>,
that provides (safer) support for pass-by-reference semantics. <br>
It also provides an optional helper function, called <a href="currentBindings.html">currentBindings</a>.</p></li>
<li><p>For package back-end: <br>
A set of tools for safer pass-by-reference modification semantics
for atomic objects,
as 'R' does not natively provide pass-by-reference mechanics
(except via it's internal C API or through a package like 'Rcpp'). <br>
The developer tools provided by 'mutatomic' were primarily designed
for the 'squarebrackets' and 'broadcast' packages,
but authors of other packages are welcome to use 'mutatomic' also. <br></p></li>
</ul><p>'mutatomic' does not come with pass-by-reference functions itself,
except for 2 simple example functions (<a href="ma_set.html">ma_set</a> and <a href="setapply.html">setapply</a>). <br><br></p>
    </div>
    <div class="section level2">
    <h2 id="for-regular-r-users">For Regular 'R' Users<a class="anchor" aria-label="anchor" href="#for-regular-r-users"></a></h2>


<p>Regular 'R' users can construct objects of class 'mutatomic',
or convert objects to class 'mutatomic'; <br>
see <a href="mutatomic_class.html">mutatomic_class</a>. <br><br>
Depending on the situation end users may also use the <a href="currentBindings.html">currentBindings</a> function. <br><br>
The 'mutatomic' package also comes with a few help pages,
that end users can refer to,
to gain a better understanding of the pass-by-reference semantics
supported by 'mutatomic'. <br>
These help pages are the following:</p><ul><li><p><a href="mutatomic_class.html">mutatomic_class</a>: <br>
Explains the 'mutatomic' class.</p></li>
<li><p><a href="aaa01_mutatomic_PassByReference.html">mutatomic_PassByReference</a>: <br>
Explains Pass-by-Reference semantics, and its important consequences.</p></li>
<li><p><a href="aaa02_mutatomic_coercion.html">mutatomic_coercion</a>: <br>
Explains the difference in coercion rules between
modification through Pass-by-Reference semantics and
modification through copy (i.e. pass-by-value). <br><br></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="for-package-back-end">For Package Back-End<a class="anchor" aria-label="anchor" href="#for-package-back-end"></a></h2>


<p>'mutatomic' provides tools for package authors to program with mutable atomic objects. <br>
Arguably the most important function in 'mutatomic' for developers is
the <a href="safe2mutate.html">stopifnot_ma_safe2mutate</a> function. <br>
This function checks if an atomic object is safe to mutate,
and gives an error otherwise. <br><br>
What follows is technical information on 'mutatomic',
and why a 'mutatomic' class is needed;
this is of no interest for regular 'R' users. <br><br></p>
    </div>
    <div class="section level2">
    <h2 id="technical-why-is-mutatomic-needed-">Technical - Why is 'mutatomic' needed?<a class="anchor" aria-label="anchor" href="#technical-why-is-mutatomic-needed-"></a></h2>


<p>Consider the following code: <br></p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">base</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/r/base/Constants.html" class="external-link">letters</a></span></span>
<span><span class="fu">collapse</span><span class="fu">::</span><span class="fu"><a href="https://sebkrantz.github.io/collapse/reference/efficient-programming.html" class="external-link">setv</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"a"</span>, <span class="st">"xxx"</span><span class="op">)</span></span></code></pre><p></p></div>
<p>the above code modifies <code><a href="https://rdrr.io/r/base/Constants.html" class="external-link">base::letters</a></code> by reference,
and nothing is stopping the user from changing base 'R' while 'R' is still running! <br>
Now, obviously <code><a href="https://sebkrantz.github.io/collapse/reference/efficient-programming.html" class="external-link">collapse::setv()</a></code> was meant for professional programmers,
and not to be called by amateurs. <br>
But what if one wishes to design an 'R' package
that provides pass-by-reference mechanics for atomic objects
in a safer way? <br><br>
This is where the 'mutatomic' package comes in. <br>
'mutatomic' provides a new class which can be considered the atomic version of the 'data.table' class,
and through this class package authors can protect the user from changing things like <code>base:letters</code>. <br><br></p>
    </div>
    <div class="section level2">
    <h2 id="technical-how-does-mutatomic-solve-the-issue-">Technical - How does 'mutatomic' solve the issue?<a class="anchor" aria-label="anchor" href="#technical-how-does-mutatomic-solve-the-issue-"></a></h2>


<p>'mutatomic' first and fore-most provides a new class, called 'mutatomic'. <br>
If a function demands an atomic object is of class 'mutatomic' to allow pass-by-reference semantics,
the above issue is (mostly) prevented. <br>
The issue is prevented through the following means: <br></p><ul><li><p>Creating an object of class 'mutatomic',
at least when using the functions provided by this package,
will copy the original object. <br>
So when calling <code>x &lt;- mutatomic(base::letters)</code>, <code>x</code> no longer refers to <code><a href="https://rdrr.io/r/base/Constants.html" class="external-link">base::letters</a></code>.</p></li>
<li><p>When a function demands an object is of class 'mutatomic',
it is (almost) guaranteed it does not refer to an base 'R' object,
so something like <code><a href="https://rdrr.io/r/base/Constants.html" class="external-link">base::letters</a></code> will never be modified by reference.</p></li>
<li><p>'mutatomic' stores a list of most base 'R' (atomic) object addresses when it is loaded. <br>
The <a href="mutatomic_class.html">is.mutatomic</a> and <a href="safe2mutate.html">stopifnot_ma_safe2mutate</a> functions check this list,
creating extra certainty that base 'R' is never modified by reference.</p></li>
<li><p>The 'mutatomic' class is not just defined by a class name attribute. <br>
The class comes with additional attributes to ensure it truly has been created by the functions of this package. <br>
Although these attributes can be mimicked with enough effort,
it is very unlikely for an object to <b>accidentally</b> have these attributes. <br>
The <a href="mutatomic_class.html">is.mutatomic</a> and <a href="safe2mutate.html">stopifnot_ma_safe2mutate</a> functions check for these attributes,
creating extra security. <br></p></li>
<li><p>'mutatomic' respects the lock of a binding,
if there is any. <br><br></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>The badges shown in the documentation of this R-package were made using the services of: <a href="https://shields.io/" class="external-link">https://shields.io/</a></p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p><strong>Author, Maintainer</strong>: Tony Wilkes <a href="mailto:tony_a_wilkes@outlook.com">tony_a_wilkes@outlook.com</a> (<a href="https://orcid.org/0000-0001-9498-8379" class="external-link">ORCID</a>)</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tony Wilkes.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

